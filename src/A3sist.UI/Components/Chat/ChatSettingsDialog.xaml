<Window x:Class="A3sist.UI.Components.Chat.ChatSettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vs="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.15.0"
        xmlns:local="clr-namespace:A3sist.UI.Components.Chat"
        mc:Ignorable="d"
        Title="A3sist Chat Settings" 
        Height="600" Width="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource VsBrush.Window}"
        Foreground="{DynamicResource VsBrush.WindowText}">

    <Window.Resources>
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,16,0,8"/>
            <Setter Property="Foreground" Value="{DynamicResource VsBrush.WindowText}"/>
        </Style>

        <Style x:Key="SettingLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,4,0,2"/>
            <Setter Property="Foreground" Value="{DynamicResource VsBrush.WindowText}"/>
        </Style>

        <Style x:Key="SettingControlStyle" TargetType="FrameworkElement">
            <Setter Property="Margin" Value="0,2,0,8"/>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                
                <!-- AI Model Settings -->
                <TextBlock Text="ðŸ¤– AI Model Settings" Style="{StaticResource SectionHeaderStyle}"/>
                
                <TextBlock Text="Default Model:" Style="{StaticResource SettingLabelStyle}"/>
                <ComboBox x:Name="DefaultModelComboBox" 
                         Style="{StaticResource SettingControlStyle}"
                         SelectedValue="{Binding Settings.DefaultModel}">
                    <ComboBoxItem Content="gpt-4"/>
                    <ComboBoxItem Content="gpt-3.5-turbo"/>
                    <ComboBoxItem Content="claude-3-opus"/>
                    <ComboBoxItem Content="claude-3-sonnet"/>
                    <ComboBoxItem Content="codestral"/>
                </ComboBox>

                <TextBlock Text="Max Tokens:" Style="{StaticResource SettingLabelStyle}"/>
                <StackPanel Orientation="Horizontal" Style="{StaticResource SettingControlStyle}">
                    <Slider x:Name="MaxTokensSlider" 
                           Minimum="100" Maximum="8000" 
                           Width="250" 
                           Value="{Binding Settings.MaxTokens}"
                           TickFrequency="500"
                           IsSnapToTickEnabled="True"/>
                    <TextBlock Text="{Binding ElementName=MaxTokensSlider, Path=Value, StringFormat='{}{0:F0}'}" 
                              Margin="8,0,0,0" 
                              VerticalAlignment="Center"/>
                </StackPanel>

                <TextBlock Text="Temperature (Creativity):" Style="{StaticResource SettingLabelStyle}"/>
                <StackPanel Orientation="Horizontal" Style="{StaticResource SettingControlStyle}">
                    <Slider x:Name="TemperatureSlider" 
                           Minimum="0" Maximum="2" 
                           Width="250" 
                           Value="{Binding Settings.Temperature}"
                           TickFrequency="0.1"
                           IsSnapToTickEnabled="True"/>
                    <TextBlock Text="{Binding ElementName=TemperatureSlider, Path=Value, StringFormat='{}{0:F1}'}" 
                              Margin="8,0,0,0" 
                              VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Interface Settings -->
                <TextBlock Text="ðŸ’¬ Interface Settings" Style="{StaticResource SectionHeaderStyle}"/>
                
                <CheckBox Content="Enable streaming responses" 
                         IsChecked="{Binding Settings.EnableStreaming}"
                         Style="{StaticResource SettingControlStyle}"/>
                
                <CheckBox Content="Show smart suggestions panel" 
                         IsChecked="{Binding Settings.ShowSuggestions}"
                         Style="{StaticResource SettingControlStyle}"/>
                
                <CheckBox Content="Auto-save conversations" 
                         IsChecked="{Binding Settings.AutoSave}"
                         Style="{StaticResource SettingControlStyle}"/>

                <TextBlock Text="History Limit (0 = unlimited):" Style="{StaticResource SettingLabelStyle}"/>
                <StackPanel Orientation="Horizontal" Style="{StaticResource SettingControlStyle}">
                    <Slider x:Name="HistoryLimitSlider" 
                           Minimum="0" Maximum="1000" 
                           Width="250" 
                           Value="{Binding Settings.HistoryLimit}"
                           TickFrequency="50"
                           IsSnapToTickEnabled="True"/>
                    <TextBlock Text="{Binding ElementName=HistoryLimitSlider, Path=Value, StringFormat='{}{0:F0}'}" 
                              Margin="8,0,0,0" 
                              VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Appearance Settings -->
                <TextBlock Text="ðŸŽ¨ Appearance" Style="{StaticResource SectionHeaderStyle}"/>
                
                <TextBlock Text="Chat Theme:" Style="{StaticResource SettingLabelStyle}"/>
                <ComboBox x:Name="ChatThemeComboBox" 
                         Style="{StaticResource SettingControlStyle}"
                         SelectedValue="{Binding Settings.ChatTheme}">
                    <ComboBoxItem Content="Auto"/>
                    <ComboBoxItem Content="Light"/>
                    <ComboBoxItem Content="Dark"/>
                    <ComboBoxItem Content="High Contrast"/>
                </ComboBox>

                <!-- Notification Settings -->
                <TextBlock Text="ðŸ”” Notifications" Style="{StaticResource SectionHeaderStyle}"/>
                
                <CheckBox Content="Enable notifications" 
                         IsChecked="{Binding Settings.EnableNotifications}"
                         Style="{StaticResource SettingControlStyle}"/>
                
                <CheckBox Content="Enable sounds" 
                         IsChecked="{Binding Settings.EnableSounds}"
                         Style="{StaticResource SettingControlStyle}"/>

                <!-- Advanced Settings -->
                <TextBlock Text="âš™ï¸ Advanced" Style="{StaticResource SectionHeaderStyle}"/>
                
                <TextBlock Text="Typing Delay (milliseconds):" Style="{StaticResource SettingLabelStyle}"/>
                <StackPanel Orientation="Horizontal" Style="{StaticResource SettingControlStyle}">
                    <Slider x:Name="TypingDelaySlider" 
                           Minimum="500" Maximum="5000" 
                           Width="250" 
                           Value="{Binding Settings.TypingDelay}"
                           TickFrequency="250"
                           IsSnapToTickEnabled="True"/>
                    <TextBlock Text="{Binding ElementName=TypingDelaySlider, Path=Value, StringFormat='{}{0:F0}ms'}" 
                              Margin="8,0,0,0" 
                              VerticalAlignment="Center"/>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <Border Grid.Row="1" 
               Background="{DynamicResource VsBrush.CommandBarGradientBegin}"
               BorderBrush="{DynamicResource VsBrush.CommandBarBorder}"
               BorderThickness="0,1,0,0"
               Padding="0,12,0,0"
               Margin="-16,16,-16,-16">
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Right"
                       Margin="16,0">
                <Button Content="Reset to Defaults" 
                       Command="{Binding ResetToDefaultsCommand}"
                       Margin="0,0,8,0"
                       Padding="12,6"
                       MinWidth="100"/>
                <Button Content="OK" 
                       Command="{Binding SaveCommand}"
                       IsDefault="True"
                       Margin="0,0,8,0"
                       Padding="12,6"
                       MinWidth="75"/>
                <Button Content="Cancel" 
                       Command="{Binding CancelCommand}"
                       IsCancel="True"
                       Padding="12,6"
                       MinWidth="75"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>